ğŸ§­ Phase 1 â€” Setup & Foundation (Day 1)
1. Start fresh from your current Shothik Presenton repo
* Keep the backend and theme system as-is (already stable from the markdown doc you uploaded).
* Create a new branch:â€¨â€¨â€¨â€¨git checkout -b rewrite/ui-chat-preview
* â€¨â€¨
* Confirm /deck â†’ /deck/[id] routing works and theme saves correctly.
2. Install all updated dependencies
In /servers/nextjs:

npm i tailwindcss postcss autoprefixer class-variance-authority tailwind-merge framer-motion lucide-react clsx html-to-image react-hot-toast
In /servers/fastapi:

pip install fastapi[all] SQLAlchemy asyncpg alembic python-dotenv pydantic websockets aiosqlite
3. Update .env
* Add:â€¨â€¨â€¨â€¨NEXT_PUBLIC_WEBSOCKET_URL=ws://localhost:8000
* DATABASE_URL=postgresql+asyncpg://user:pass@localhost:5432/shothik
* â€¨â€¨
* Add fallback SQLite:â€¨â€¨â€¨â€¨DATABASE_URL=sqlite+aiosqlite:///./local.db
* â€¨â€¨

ğŸ¨ Phase 2 â€” Rewrite UI (Days 2â€“3)
4. New layout skeleton
Inside /components/editor/:

EditorShell.tsx        â†’ main layout
SlideOutline.tsx       â†’ left sidebar (slides list)
SlideCanvas.tsx        â†’ center live canvas
RightTabs.tsx          â†’ right panel (Chat, Style, Assets)
ChatPanel.tsx          â†’ chat system
âœ… Checklist for EditorShell
* Top bar: deck title, share button, theme toggle.
* Grid layout: grid-cols-[220px_1fr_320px] (sidebar, canvas, right panel).
* Keyboard navigation for slides â†‘/â†“.
âœ… Chat Panel
* Stream messages token-by-token via WebSocket.
* Support /outline, /rewrite slide X, /image.
âœ… Style Tab
* Integrate your existing ThemePicker.
* Add preview color palette on active deck.
âœ… Slide Canvas
* Render slide blocks (text, image, shape).
* Use html-to-image to render thumbnails in real-time.

âš™ï¸ Phase 3 â€” Backend Expansion (Days 4â€“5)
5. Add tables (Alembic migration)

# slides, slide_blocks, threads, messages
Each slide â†’ multiple slide_blocks (type text/image/etc.).â€¨Each deck â†’ multiple threads, each thread â†’ multiple messages.
6. Endpoints

GET/POST /slides
GET/PUT/DELETE /blocks
POST /threads
POST /messages
WS /stream/{thread_id}
WebSocket stream example:

@app.websocket("/api/v1/ppt/stream/{thread_id}")
async def chat_stream(ws: WebSocket, thread_id: str):
    await ws.accept()
    while True:
        msg = await ws.receive_text()
        # generate tokens (placeholder or via AI)
        for t in ["Processing...", "Outline ready!"]:
            await ws.send_json({"type": "token", "delta": t})
        await ws.send_json({"done": True})
7. Slide preview
* Client: html-to-image â†’ thumbnails.
* Optional: POST /export/pdf (use Puppeteer later).
